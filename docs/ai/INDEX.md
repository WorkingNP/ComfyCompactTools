# docs/ai/INDEX.md

このリポジトリのAI運用マップです。

## まず読む
- `docs/ai/WORKFLOW.md` … 作業フロー（チケット→テスト→実装→レビュー）
- `docs/tickets/` … 機能チケット（例とテンプレ）

## 重要な思想
- **会話ログに依存しない**：意図は「テスト」に込める。
- **失敗したら戻す→再プラン**：方向性ズレをつぎはぎで直さない。
- **変更範囲を絞る**：テストがあるほど触るファイルが減る。

---

## なぜこの構造なのか

### 疎結合アーキテクチャ → 並列実装
各コンポーネント・モジュール間の依存を減らし、最小単位の分割をした疎結合的アーキテクチャにすることで、サブエージェントが持つべきコンテキストや触るべきファイルを減らす。これにより、コンフリクトや莫大なトークン消費を恐れず並列実装させやすくなる。

### テストをゴールに固定 → 人間のコンテキスト負荷削減
各エージェントに明確なゴールがないと、出戻りやエラー処理、仕様変更の確認で（主に人間の）コンテキストメモリが圧殺される。テストのクリアだけをゴールに設定した「実装→レビュー→実装」のエージェントループを強制して解決する。

### 体験導線を意識したテスト → E2E（Playwright）
「タスク完了 = 望んだ意図の実装」状態にするには、ユーザーの体験導線を強く意識したテストが必要。
例：「拡大するってことは見やすくしたいんだな。じゃあでかくなりすぎて画像が見切れてしまったら本末転倒だ。じゃあ特定の範囲に画像が表示されたらクリアにしよう」
このような思考フェーズを"プラン作成→実装"の間に挟むことで、「ユーザーがあらかじめ綿密なプラン組むの無理問題」と「AIに綿密なプラン組ませても膨大すぎてレビューしきるの無理問題」を同時に解決。単一モジュールの表面的テストではなく、Playwrightを使ったE2Eテストが相性良い。

### 役割分担 → 各AIが集中できる環境
この役回りをコーディングエージェント（Claude Code）にやらせると、コンテキスト負荷でパフォーマンスが低下する。

| 役割 | 担当 |
|------|------|
| ヒアリング・プランレビュー・テスト作成 | GPT Codex |
| 技術的実装 | Claude Code |

各々が集中できる環境を作る。
